<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>RedScript by AdamBrodzinski</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>RedScript</h1>
          <h2>A Ruby Flavored JavaScript Experiment</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/AdamBrodzinski/RedScript/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/AdamBrodzinski/RedScript/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/AdamBrodzinski/RedScript" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <ul>
<li>Paste (almost) any JS into a RedScript file</li>
<li>Native feeling module syntax (AMD &amp; CommonJS)</li>
<li>Easier class like inheritance or self based prototypal inheritance syntax</li>
</ul><p>RedScript is an experiment created to provide a better syntax for AMD modules, easier inheritance and a more usable ES5 object syntax. It was also created as a side project to learn more about Node, NPM Modules and Regular Expressions. In the future I would also like convert this prototype compiler into a proper one with a lexer/parser to implement more advanced features like optional parens, variable scope and <code>attr_accessor</code> like ES5 object properties. <em>Pull requests welcome ;-)</em></p>

<h4>To Install Globally and Run</h4>

<pre><code>sudo npm install -g redscript
redscript watch [fileName1.rs fileName2.rs]
</code></pre>

<h2>Syntax</h2>

<p>If you have suggestions on different syntax, please create
an issue: <a href="https://github.com/AdamBrodzinski/RedScript/issues">here</a>.</p>

<hr><h4>Comments</h4>

<p><em>Status</em>: <em>Working</em></p>

<p>Line comments are made with a <code>#</code>. RedScript currently does not have multi-line comments but <code>/*...*/</code> can be used if needed.</p>

<div class="highlight"><pre><span class="c1"># I'm a comment                          // I'm a comment</span>
<span class="nx">$</span><span class="p">(</span><span class="s">'#someID'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span>                   <span class="nx">$</span><span class="p">(</span><span class="s">'#someID'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="c1"># No worries here</span>
</pre></div>

<p><br></p>

<h4>Alias @ with this</h4>

<p><em>Status:</em> Working</p>

<div class="highlight"><pre><span class="n">function</span> <span class="no">Foo</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="p">{</span>               <span class="n">function</span> <span class="no">Foo</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="p">){</span>
  <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>                             <span class="n">this</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">name</span><span class="p">;</span>
  <span class="vi">@age</span> <span class="o">=</span> <span class="n">age</span>                               <span class="n">this</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span><span class="p">;</span>
<span class="p">}</span>                                        <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>Loops</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p><em>Note</em>, for in range loops only support <code>0..3</code>, <code>0...3</code> or variables e.g. <code>begin..ending</code>. Note, currently the range does not go backwards (<code>10..0</code>).<br>
To prevent confusion until loops have an <code>//until</code> comment next to the compiled output.</p>

<div class="highlight"><pre><span class="k">while</span> <span class="n">foo</span> <span class="o">&lt;</span> <span class="mi">200</span>                        <span class="k">while</span> <span class="p">(</span><span class="n">foo</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">puts</span> <span class="s2">"I'm looping forever"</span>              <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"I'm looping forever"</span><span class="p">);</span>
<span class="k">end</span>                                     <span class="p">}</span>


<span class="c1"># loops until a condition is true</span>
<span class="k">until</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span>                            <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">))</span> <span class="p">{</span> <span class="sr">//</span> <span class="kp">loop</span> <span class="k">until</span>  
   <span class="nb">puts</span> <span class="n">i</span>                                  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>                
   <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>                                  <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>                        
<span class="k">end</span>                                     <span class="p">}</span>                                 


<span class="c1"># prints 5x, 0,1,2,3,4                  </span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span>                           <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>    
  <span class="nb">puts</span> <span class="n">i</span>                                  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>           
<span class="k">end</span>                                     <span class="p">}</span>                             


<span class="c1"># prints 6x, 0,1,2,3,4,5                </span>
<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="mi">5</span>                          <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">puts</span> <span class="n">i</span>                                  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>       
<span class="k">end</span>                                     <span class="p">}</span>                          
</pre></div>

<p><br></p>

<h4>Iterating over arrays and objects</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<div class="highlight"><pre><span class="c1"># Iterate over arrays</span>
<span class="n">basket</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'lemon'</span><span class="p">,</span> <span class="s1">'pear'</span><span class="p">,</span> <span class="s1">'apple'</span><span class="o">]</span>     <span class="n">var</span> <span class="n">basket</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'lemon'</span><span class="p">,</span> <span class="s1">'pear'</span><span class="p">,</span> <span class="s1">'apple'</span><span class="o">]</span><span class="p">;</span>

<span class="k">for</span> <span class="n">fruit</span> <span class="n">inArr</span> <span class="n">basket</span>                  <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">i1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">len1</span><span class="o">=</span><span class="n">basket</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i1</span> <span class="o">&lt;</span> <span class="n">len1</span><span class="p">;</span> <span class="n">i1</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="n">var</span> <span class="n">fruit</span> <span class="o">=</span> <span class="n">basket</span><span class="o">[</span><span class="n">i1</span><span class="o">]</span><span class="p">;</span>    
  <span class="nb">puts</span> <span class="n">fruit</span>                              <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">fruit</span><span class="p">);</span>                                                            
<span class="k">end</span>                                     <span class="p">}</span>                                                                                


<span class="k">for</span> <span class="n">key</span> <span class="k">in</span> <span class="n">obj</span>                          <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">alert</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>                             <span class="n">alert</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="k">end</span>                                     <span class="p">}</span>


<span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="k">in</span> <span class="n">obj</span>                      <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span> <span class="n">var</span> <span class="n">val</span> <span class="o">=</span> <span class="n">obj</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
  <span class="nb">puts</span> <span class="s1">'My key is: #{key}'</span>                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'My key is: '</span> <span class="o">+</span> <span class="n">key</span><span class="p">);</span>
  <span class="nb">puts</span> <span class="s1">'My value is: #{val}'</span>              <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'My value is: '</span> <span class="o">+</span> <span class="n">val</span><span class="p">);</span>
<span class="k">end</span>                                     <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>Convenience method aliases for puts &amp; printf</h4>

<p><em>Status:</em> <strong>Working</strong><br><code>puts</code> and <code>printf</code> are aliases to <code>console.log</code> and <code>process.stdout.write</code>. <code>printf</code> is only available with node enviroments. These are the only methods that have optional parens at this time. If parens are omitted a closing paren will be appended to the end of the line. Parenless multi lines are not possible.</p>

<div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"Hello there"</span>                      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Hello there"</span><span class="p">);</span>
<span class="nb">puts</span><span class="p">(</span><span class="s2">"Hai!"</span><span class="p">)</span>                            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Hai"</span><span class="p">)</span>
<span class="nb">printf</span> <span class="s2">"Hola"</span>                           <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">)</span>
<span class="nb">printf</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">)</span>                          <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">)</span>
</pre></div>

<p><br></p>

<h4>Variables &amp; automatic semi-colon insertion</h4>

<p><em>Status</em>: <strong>Partially implemented, known bug</strong></p>

<p>Variables are automatically declared. Using the var keyword is optional and allowed.<br>
Constants are pre-processed at compile time. This allows some memory savings in certain cases where itcan be utilized.
Semi-colons are automatically inserted as needed (currently not implemented).</p>

<p><em>Note currently RedScript does not take function scope into account. Any
variables that are declared inside of a function multiple times can
lead to unintended global leaks. To disable auto declaration pass <code>no--declare</code>. Another workaround is
to manually declare variables with the var keyword.</em></p>

<div class="highlight"><pre><span class="n">foo</span> <span class="o">=</span> <span class="mi">12</span>                 <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">foo</span> <span class="o">=</span> <span class="mi">20</span>                 <span class="n">foo</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

<span class="c1"># Constants are preprocessed</span>
<span class="no">AMOUNT</span> <span class="o">=</span> <span class="mi">233</span>            
<span class="nb">puts</span> <span class="no">AMOUNT</span>             <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">233</span><span class="p">)</span>

<span class="c1"># !! Lexical scoping bug in current version !!</span>
<span class="n">func</span> <span class="n">foo</span>                <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">baz</span> <span class="o">=</span> <span class="mi">20</span>                <span class="n">var</span> <span class="n">baz</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>       
<span class="k">end</span>                     <span class="p">};</span>                    

<span class="n">func</span> <span class="n">bar</span>                <span class="n">var</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">baz</span> <span class="o">=</span> <span class="mi">30</span>                <span class="n">baz</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>       
<span class="k">end</span>                     <span class="p">};</span>                     
</pre></div>

<p><br></p>

<h4>Optional Parenthesis</h4>

<p><em>Status:</em> <strong>Implemented with RedScript constructs only</strong></p>

<p>Currently I cannot implement this until I can create a proper lexer. Pull requests welcome ;-) For the time being you have to include parens. A temporary kludgey alias for <code>end)</code> is <code>end-</code>. This is slightly easier to look at for the short run, but expect this to be dropped in the future.</p>

<div class="highlight"><pre><span class="n">alert</span> <span class="s1">'Hello World!'</span>

<span class="n">getUser</span> <span class="s1">'/users/1'</span><span class="p">,</span> <span class="k">do</span>
  <span class="n">alert</span> <span class="n">user</span>
<span class="k">end</span>

<span class="c1"># Currently you still have to use parens for anything that's not a RedScript construct.</span>
<span class="n">getUser</span><span class="p">(</span> <span class="s1">'/users/1'</span><span class="p">,</span> <span class="k">do</span>
  <span class="n">alert</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>

<span class="c1"># A kludgey alias for `end)` is `end-`</span>
<span class="n">getUser</span><span class="p">(</span> <span class="s1">'/users/1'</span><span class="p">,</span> <span class="k">do</span>
  <span class="n">alert</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">end</span><span class="o">-</span>
</pre></div>

<p><br></p>

<h4>Ruby flavored functions</h4>

<p><code>Func [name]</code> declares the function as an expression and sets <code>[name]</code> to a variable. Parens are optional if no arguments are being passed. If arguments are passed braces must be used. Anonymous functions are declared as <code>func</code>, parens are also optional. This type of anonymous function should only be used when using <code>do |x|</code> would be awkward, such as in an <a href="https://github.com/caolan/async">async</a>'s array of parallel functions.</p>

<p><em>Status:</em> <strong>Working</strong></p>

<div class="highlight"><pre><span class="n">func</span> <span class="n">say</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>                            <span class="n">var</span> <span class="n">say</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">puts</span> <span class="s2">"Message: </span><span class="si">#{</span><span class="n">msg</span><span class="si">}</span><span class="s2">"</span>                   <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Message: "</span> <span class="o">+</span> <span class="n">msg</span><span class="p">);</span>
<span class="k">end</span>                                      <span class="p">};</span>

<span class="c1"># Optional function parens</span>
<span class="n">func</span> <span class="n">sayHello</span>
  <span class="nb">puts</span> <span class="s2">"Hello"</span>
<span class="k">end</span>

<span class="c1"># anonymous function</span>
<span class="n">func</span>                                    <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1"># do stuff                              // do stuff</span>
<span class="k">end</span>                                     <span class="p">}</span>

<span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>                               <span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># do stuff                              // do stuff</span>
<span class="k">end</span>                                     <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>If/else/else if</h4>

<p><em>Status:</em> <strong>Partially implemented</strong></p>

<p>If statements currently are multi-line. If you would like to use a one liner, you can still use vanilla js <code>if (err) throw err;</code>.</p>

<div class="highlight"><pre><span class="k">if</span> <span class="n">foo</span> <span class="o">==</span> <span class="mi">10</span>                            <span class="k">if</span> <span class="p">(</span><span class="n">foo</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">)</span>                         <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">);</span>
<span class="k">else</span> <span class="k">if</span> <span class="n">foo</span> <span class="o">==</span> <span class="mi">20</span>                       <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">foo</span> <span class="o">===</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">)</span>                         <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">);</span>
<span class="k">else</span>                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">)</span>                         <span class="n">bar</span><span class="p">(</span><span class="s2">"do stuff"</span><span class="p">);</span>
<span class="k">end</span>                                     <span class="p">}</span>

<span class="kp">throw</span> <span class="n">err</span> <span class="k">if</span> <span class="n">err</span>                        <span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span> <span class="kp">throw</span> <span class="n">err</span><span class="p">;</span> <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>Methods &amp; Object Literal</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Methods are declared using the def keyword and parens are optional <em>if</em> arguments are not used.<br>
Attaching a method to an object's prototype be defined using <code>def objName &gt;&gt; mthdName</code>.</p>

<div class="highlight"><pre><span class="n">object</span> <span class="n">auto</span>                                   <span class="n">var</span> <span class="n">auto</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">wheels</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>                                    <span class="ss">wheels</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="ss">engine</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>                                 <span class="ss">engine</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>

  <span class="k">def</span> <span class="nf">honk</span>                                      <span class="ss">honk</span><span class="p">:</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">puts</span> <span class="s2">"hoooonk"</span>                                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"hooooonk"</span><span class="p">);</span>
  <span class="k">end</span><span class="p">,</span>                                          <span class="p">},</span>

  <span class="k">def</span> <span class="nf">sayHi</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>                                <span class="ss">sayHi</span><span class="p">:</span> <span class="n">function</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">puts</span> <span class="n">msg</span>                                      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
  <span class="k">end</span>                                           <span class="p">}</span>
<span class="k">end</span>                                           <span class="p">}</span>

<span class="c1"># Define outside of object literal</span>
<span class="k">def</span> <span class="nc">auto</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>                            <span class="n">auto</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="vi">@wheels</span>                            <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">this</span><span class="o">.</span><span class="n">wheels</span><span class="p">;</span>
<span class="k">end</span>                                           <span class="p">};</span>

<span class="c1"># Define method attached to prototype</span>
<span class="k">def</span> <span class="nf">Car</span> <span class="o">&gt;&gt;</span> <span class="nb">sub</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>                          <span class="no">Car</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">sub</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>                                  <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">;</span>
<span class="k">end</span>                                           <span class="p">};</span>
</pre></div>

<p><br></p>

<h4>Block-like Syntax for Anonymous Functions</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Block like syntax is a shorter way to write an anonymous function. The preceding comma is optional. However, including it may be easier to understand if it's included. Once we have optional parens working this will look <em>much</em> nicer! </p>

<div class="highlight"><pre>
<span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/users/:user'</span><span class="p">,</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>        <span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/users/:user'</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">puts</span> <span class="n">req</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">name</span>                    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">name</span><span class="p">);</span>
<span class="k">end</span><span class="p">)</span>                                    <span class="p">});</span>

<span class="c1"># no params</span>
<span class="vg">$myBtn</span><span class="o">.</span><span class="n">click</span><span class="p">(</span> <span class="k">do</span>                        <span class="vg">$myBtn</span><span class="o">.</span><span class="n">click</span><span class="p">(</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">alert</span><span class="p">(</span><span class="s2">"hi"</span><span class="p">)</span>                             <span class="n">alert</span><span class="p">(</span><span class="s2">"hi"</span><span class="p">);</span>
<span class="k">end</span><span class="p">)</span>                                    <span class="p">});</span>
</pre></div>

<p><br></p>

<h4>CommonJS Modules</h4>

<p><em>Status:</em> <strong>Partially Implemented</strong>  </p>

<div class="highlight"><pre><span class="c1"># Require a module as set variable as that name</span>
<span class="nb">require</span> <span class="s1">'express'</span>                                          <span class="n">var</span> <span class="n">express</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>

<span class="c1"># Require a directory as a different name</span>
<span class="nb">require</span> <span class="s1">'./lib/widget'</span> <span class="n">as</span> <span class="no">Widget</span>                           <span class="n">var</span> <span class="no">Widget</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">'./lib/widget'</span><span class="p">);</span>

<span class="c1"># Require a property of a module</span>
<span class="nb">require</span> <span class="s1">'events'</span><span class="o">.</span><span class="n">EventEmitter</span> <span class="n">as</span> <span class="no">EM</span>                        <span class="n">var</span> <span class="no">EM</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">'events'</span><span class="p">)</span><span class="o">.</span><span class="n">EventEmitter</span><span class="p">;</span>

<span class="c1"># Require file foo and set it's variable to foo</span>
<span class="nb">require</span> <span class="s1">'../lib/Router'</span>                                    <span class="n">var</span> <span class="no">Router</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">'../lib/Router'</span><span class="p">);</span> 

<span class="c1"># export methods</span>
<span class="n">export</span> <span class="k">def</span> <span class="nf">getName</span>                                         <span class="n">exports</span><span class="o">.</span><span class="n">getName</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>                                           <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
<span class="k">end</span>                                                        <span class="p">};</span>

<span class="c1"># export properties</span>
<span class="n">export</span> <span class="n">age</span>                                                 <span class="n">exports</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">22</span><span class="p">;</span>
</pre></div>

<div class="highlight"><pre>
<span class="n">func</span> <span class="nb">name</span>                                                <span class="n">var</span> <span class="nb">name</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">"John"</span>                                            <span class="k">return</span> <span class="s2">"John"</span><span class="p">;</span>
<span class="k">end</span>                                                      <span class="p">}</span>

<span class="n">age</span> <span class="o">=</span> <span class="mi">92</span>                                                 <span class="n">var</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>

<span class="n">export</span>                                                    <span class="n">module</span><span class="o">.</span><span class="n">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">getName</span> <span class="n">as</span> <span class="nb">name</span>                                           <span class="ss">getName</span><span class="p">:</span> <span class="nb">name</span><span class="p">,</span>
  <span class="n">age</span>                                                       <span class="ss">age</span><span class="p">:</span> <span class="n">age</span>
<span class="k">end</span>                                                       <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>RequireJS Module Sugar</h4>

<p><em>Status:</em> <strong>Not Implemented</strong>  </p>

<p>Using <code>define module</code> wraps the current file in a new anonymous RequireJS module. Exports can either be exported in a export object literal or by using <code>export foo</code> to export the foo variable only. Any dependencies can be declared by using <code>require 'foo' as foo</code> which assigns <code>'foo'</code>'s returned value to a variable called <code>foo</code>.</p>

<div class="highlight"><pre><span class="n">define</span> <span class="k">module</span>                                                  <span class="nn">define</span><span class="p">(</span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>

<span class="n">func</span> <span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                                                      <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">puts</span> <span class="n">x</span>                                                           <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="k">end</span>                                                              <span class="p">}</span>

<span class="n">export</span> <span class="n">foo</span>                                                       <span class="k">return</span> <span class="n">foo</span><span class="p">;</span> <span class="p">});</span>
</pre></div>

<div class="highlight"><pre>
<span class="n">define</span> <span class="k">module</span>                                                   <span class="nn">define</span><span class="p">(</span><span class="o">[</span> <span class="s1">'jquery'</span><span class="p">,</span>
<span class="nb">require</span> <span class="s1">'jquery'</span> <span class="n">as</span> <span class="err">$</span>                                                    <span class="s1">'./views/widget'</span><span class="o">]</span><span class="p">,</span>
<span class="nb">require</span> <span class="s1">'./views/widget'</span> <span class="n">as</span> <span class="no">Widget</span>                                <span class="n">function</span><span class="p">(</span><span class="vg">$,</span> <span class="no">Widget</span><span class="p">)</span> <span class="p">{</span>        

<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>                                                        <span class="n">var</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">moonRoof</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>                                                    <span class="ss">moonRoof</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>   
  <span class="ss">seats</span><span class="p">:</span> <span class="mi">5</span>                                                           <span class="ss">seats</span><span class="p">:</span> <span class="mi">5</span>      
<span class="p">}</span>                                                                  <span class="p">}</span>          

<span class="n">getCost</span> <span class="o">=</span> <span class="mi">16899</span>                                                    <span class="n">var</span> <span class="n">getCost</span> <span class="o">=</span> <span class="mi">16899</span><span class="p">;</span>
<span class="n">wheels</span> <span class="o">=</span> <span class="mi">4</span>                                                         <span class="n">var</span> <span class="n">wheels</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

<span class="c1"># export literal compiles to an object that gets returned</span>
<span class="n">export</span>                                                              <span class="k">return</span> <span class="p">{</span>   
  <span class="n">getCost</span>                                                               <span class="n">getCost</span> <span class="p">:</span> <span class="n">getCost</span><span class="p">,</span>
  <span class="n">hasMoonRoof</span> <span class="n">from</span> <span class="n">options</span><span class="o">.</span><span class="n">moonRoof</span>                                     <span class="n">hasMoonRoof</span> <span class="p">:</span> <span class="n">options</span><span class="o">.</span><span class="n">moonRoof</span><span class="p">,</span>   
  <span class="n">getWheels</span> <span class="n">from</span> <span class="n">wheels</span>                                                 <span class="n">getWheels</span> <span class="p">:</span> <span class="n">wheels</span>     
<span class="k">end</span>                                                                 <span class="p">}</span>           
                                                                <span class="p">});</span> 
</pre></div>

<p><br></p>

<h4>Ruby / Coffee style case switch statement</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Switch statements still need <code>break</code> inserted to prevent falling through. The exception is one liners, then it's appened to the line.</p>

<div class="highlight"><pre><span class="n">switch</span> <span class="n">fruit</span>                                             <span class="n">switch</span> <span class="p">(</span><span class="n">fruit</span><span class="p">)</span> <span class="p">{</span>
<span class="k">when</span> <span class="s2">"apple"</span>                                               <span class="k">case</span> <span class="s2">"apple"</span><span class="p">:</span>
  <span class="nb">puts</span> <span class="s2">"it's an appppple"</span>                                    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"it's an appppple"</span><span class="p">);</span>
  <span class="k">break</span>                                                      <span class="k">break</span><span class="p">;</span>
<span class="k">when</span> <span class="s2">"bannana"</span> <span class="k">then</span> <span class="nb">puts</span><span class="p">(</span><span class="s2">"bannana"</span><span class="p">)</span>                        <span class="k">case</span> <span class="s2">"bannana"</span><span class="p">:</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"bannana"</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
<span class="k">when</span> <span class="s2">"orange"</span>                                              <span class="k">case</span> <span class="s2">"orange"</span><span class="p">:</span>
  <span class="nb">puts</span> <span class="s2">"it's an orange"</span>                                      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"it's an orange"</span><span class="p">);</span>
  <span class="k">break</span>                                                      <span class="k">break</span><span class="p">;</span>
<span class="n">default</span>                                                    <span class="ss">default</span><span class="p">:</span>
  <span class="nb">puts</span> <span class="s2">"uh oh, bummer"</span>                                       <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"uh oh, bummer"</span><span class="p">);</span>
<span class="k">end</span>                                                      <span class="p">}</span>
</pre></div>

<p><br></p>

<h4>Private Blocks</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Private blocks keep variables scoped inside the block using function scope. There is a slight performance hit due to the IIFE. Again, due to the lack of proper lexing/parsing I can't yet use an <code>end</code> block. A workaround is <code>endPriv</code>, this calls the IIFE. Also due to the variable declaration bug mention above, variables like the example below will currently need var manually inserted to keep <code>foo</code> from leaking out and changing global <code>foo</code> to <code>10</code>. The beginning of the IIFE is nerfed with a semi-colon to prevent any potential errors (especially with the current state of RedScript not having automatic semi-colon insertion). </p>

<div class="highlight"><pre><span class="n">foo</span> <span class="o">=</span> <span class="mi">200</span>                                                 <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span> 

<span class="kp">private</span>                                                  <span class="p">(</span><span class="n">function</span><span class="p">(){</span>
  <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">10</span>                                              <span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">endPriv</span>                                                   <span class="p">})();</span>

<span class="n">alert</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span> <span class="c1">#alerts 200                                    alert(foo);</span>
</pre></div>

<p><br></p>

<h4>Classical Inheritance</h4>

<p><em>Status</em>: <strong>Working</strong></p>

<p>RedScript classes are currently using John Resig's simple inheritance. In the future a solution closer to coffeescript would be ideal, allowing one to inherit from any constructor and still have the correct syntax. The current implementation will not inherit unless the base class is created with RedScript. However, backbone and ember both use the <code>.extend</code> method which is convenient since using<br><code>class Foo &lt; Backbone.Model.extend(</code> will call their own extend implementation. Backbone does not have a <code>this._super</code> method so if you want to call super you would need to use a backbone plugin for that. Ember uses the same <code>this._super</code> syntax as RedScript so calling super will call Ember's implementation.</p>

<p>If you're only using their inheritance implementation you can disable the insertion of RedScript's inheritance by passing the <code>--no-class-insertion</code> flag.</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">Animal</span>                                          <span class="n">var</span> <span class="no">Animal</span> <span class="o">=</span> <span class="no">Class</span><span class="o">.</span><span class="n">extend</span><span class="p">({</span>           
  <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>                                        <span class="ss">init</span><span class="p">:</span> <span class="n">function</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="p">{</span>              
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>                                          <span class="n">this</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">name</span><span class="p">;</span>                 
  <span class="k">end</span><span class="p">,</span>                                                  <span class="p">},</span>                                  

  <span class="k">def</span> <span class="nf">sayHi</span>                                             <span class="ss">sayHi</span><span class="p">:</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>                 
    <span class="nb">puts</span> <span class="s2">"Hello"</span>                                          <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>             
  <span class="k">end</span>                                                   <span class="p">}</span>                                   
<span class="k">end</span><span class="p">)</span>                                                   <span class="p">});</span>                                   

<span class="k">class</span> <span class="nc">Duck</span> <span class="o">&lt;</span> <span class="no">Animal</span>                                   <span class="n">var</span> <span class="no">Duck</span> <span class="o">=</span> <span class="no">Animal</span><span class="o">.</span><span class="n">extend</span><span class="p">({</span>            
  <span class="k">def</span> <span class="nf">init</span>                                              <span class="ss">init</span><span class="p">:</span> <span class="n">function</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">super</span> <span class="nb">name</span>                                            <span class="n">this</span><span class="o">.</span><span class="n">_super</span><span class="p">(</span><span class="nb">name</span><span class="p">);</span>                    
    <span class="n">alert</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="s2"> is alive!"</span><span class="p">)</span>                           <span class="n">alert</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">" is alive!"</span><span class="p">)</span>   
  <span class="k">end</span><span class="p">,</span>                                                  <span class="p">},</span>                                  

  <span class="k">def</span> <span class="nf">sayHi</span>                                             <span class="ss">sayHi</span><span class="p">:</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>                 
    <span class="k">super</span>                                                 <span class="n">this</span><span class="o">.</span><span class="n">_super</span><span class="p">();</span>                    
    <span class="nb">puts</span> <span class="s2">"Quack"</span>                                          <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Quack"</span><span class="p">);</span>             
  <span class="k">end</span>                                                   <span class="p">}</span>                                   
<span class="k">end</span><span class="p">)</span>                                                   <span class="p">});</span>                                   

<span class="n">duck</span> <span class="o">=</span> <span class="kp">new</span> <span class="no">Duck</span><span class="p">(</span><span class="s1">'Darick'</span><span class="p">)</span>                             <span class="n">var</span> <span class="n">duck</span> <span class="o">=</span> <span class="kp">new</span> <span class="no">Duck</span><span class="p">(</span><span class="s1">'Darick'</span><span class="p">);</span>
<span class="n">duck</span><span class="o">.</span><span class="n">sayHi</span><span class="p">()</span>                                          <span class="n">duck</span><span class="o">.</span><span class="n">sayHi</span><span class="p">();</span>
</pre></div>

<p><br></p>

<h4>Prototypal Inheritance</h4>

<p><em>Status</em>: <strong>Partially Implemented</strong></p>

<p>This is an experiment to try and bring out JavaScripts true prototypal nature. The goal is to be able to <em>easily</em> inherit without using constructors or faux classes. Vanilla JS makes it very verbose to inherit from another object, unlike <a href="http://en.wikipedia.org/wiki/Self_programming_language#Inheritance.2FDelegation">Self</a>, JavaScript's inheritance inspiration. One of the drawbacks to property delegation is keeping state in an object. Using <code>object myDuck clones duck</code> will copy all of the properties from duck into myDuck, ensuring it won't grab it's parents property by accident. Currently <code>clones</code> is not implemeneted yet.</p>

<div class="highlight"><pre><span class="n">object</span> <span class="n">animal</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>

  <span class="k">def</span> <span class="nf">sayHi</span>
    <span class="nb">puts</span> <span class="s2">"Hello"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">object</span> <span class="n">duck</span>
  <span class="n">parent</span><span class="o">*</span><span class="p">:</span> <span class="n">animal</span><span class="p">,</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>

  <span class="k">def</span> <span class="nf">sayHi</span>
    <span class="nb">puts</span> <span class="s2">"Quack"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># this duck's attr's are cloned instead of deligated</span>
<span class="c1"># with `parent*`, usefull for statefull objects</span>
<span class="c1">#</span>
<span class="n">object</span> <span class="n">myDuck</span> <span class="n">clones</span> <span class="n">duck</span>
  <span class="nb">name</span><span class="p">:</span> <span class="s1">'Darick'</span>
<span class="k">end</span>
</pre></div>
        </section>

        <footer>
          RedScript is maintained by <a href="https://github.com/AdamBrodzinski">AdamBrodzinski</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38075559-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>