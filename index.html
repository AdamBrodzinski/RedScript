<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>RedScript by AdamBrodzinski</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">RedScript</h1>
      <h2 class="project-tagline">A Ruby Flavored JavaScript Experiment</h2>
      <a href="https://github.com/AdamBrodzinski/RedScript" class="btn">View on GitHub</a>
      <a href="https://github.com/AdamBrodzinski/RedScript/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AdamBrodzinski/RedScript/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <ul>
<li>Paste (almost) any JS into a RedScript file</li>
<li>Native feeling module syntax (AMD &amp; CommonJS)</li>
<li>Easier class like inheritance or self based prototypal inheritance syntax</li>
</ul>

<p>RedScript is an experiment created to provide a better syntax for AMD modules, easier inheritance and a more usable ES5 object syntax. It was also created as a side project to learn more about Node, NPM Modules and Regular Expressions. In the future I would also like convert this prototype compiler into a proper one with a lexer/parser to implement more advanced features like optional parens, variable scope and <code>attr_accessor</code> like ES5 object properties. <em>Pull requests welcome ;-)</em></p>

<h4>
<a id="to-install-globally-and-run" class="anchor" href="#to-install-globally-and-run" aria-hidden="true"><span class="octicon octicon-link"></span></a>To Install Globally and Run</h4>

<pre><code>sudo npm install -g redscript
redscript watch [fileName1.rs fileName2.rs]
</code></pre>

<h2>
<a id="syntax" class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>

<p>If you have suggestions on different syntax, please create
an issue: <a href="https://github.com/AdamBrodzinski/RedScript/issues">here</a>.</p>

<hr>

<h4>
<a id="comments" class="anchor" href="#comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Comments</h4>

<p><em>Status</em>: <em>Working</em></p>

<p>Line comments are made with a <code>#</code>. RedScript currently does not have multi-line comments but <code>/*...*/</code> can be used if needed.</p>

<div class="highlight highlight-source-coffee"><pre><span class="pl-c"># I'm a comment                          // I'm a comment</span>
$(<span class="pl-s"><span class="pl-pds">'</span>#someID<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>(foo)                   $(<span class="pl-s"><span class="pl-pds">'</span>#someID<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>(foo) <span class="pl-c"># No worries here</span></pre></div>

<p><br></p>

<h4>
<a id="alias--with-this" class="anchor" href="#alias--with-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alias @ with this</h4>

<p><em>Status:</em> Working</p>

<div class="highlight highlight-source-ruby"><pre>function <span class="pl-c1">Foo</span>(name, age) {               function <span class="pl-c1">Foo</span>(name, age){
  <span class="pl-smi">@name</span> <span class="pl-k">=</span> name                             this.name <span class="pl-k">=</span> name;
  <span class="pl-smi">@age</span> <span class="pl-k">=</span> age                               this.age <span class="pl-k">=</span> age;
}                                        }</pre></div>

<p><br></p>

<h4>
<a id="loops" class="anchor" href="#loops" aria-hidden="true"><span class="octicon octicon-link"></span></a>Loops</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p><em>Note</em>, for in range loops only support <code>0..3</code>, <code>0...3</code> or variables e.g. <code>begin..ending</code>. Note, currently the range does not go backwards (<code>10..0</code>).<br>
To prevent confusion until loops have an <code>//until</code> comment next to the compiled output.</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">while</span> foo <span class="pl-k">&lt;</span> <span class="pl-c1">200</span>                        <span class="pl-k">while</span> (foo <span class="pl-k">&lt;</span> <span class="pl-c1">200</span>) {
  puts <span class="pl-s"><span class="pl-pds">"</span>I'm looping forever<span class="pl-pds">"</span></span>              console.log(<span class="pl-s"><span class="pl-pds">"</span>I'm looping forever<span class="pl-pds">"</span></span>);
<span class="pl-k">end</span>                                     }


<span class="pl-c"># loops until a condition is true</span>
<span class="pl-k">until</span> i <span class="pl-k">==</span> <span class="pl-c1">5</span>                            <span class="pl-k">while</span> (!(i <span class="pl-k">==</span> <span class="pl-c1">5</span>)) { <span class="pl-k">//</span> <span class="pl-k">loop</span> <span class="pl-k">until</span>  
   puts i                                  console.log(i);                
   i <span class="pl-k">+=</span> <span class="pl-c1">1</span>                                  i <span class="pl-k">+=</span> <span class="pl-c1">1</span>;                        
<span class="pl-k">end</span>                                     }                                 


<span class="pl-c"># prints 5x, 0,1,2,3,4                  </span>
<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">0</span>..<span class="pl-c1">5</span>                           <span class="pl-k">for</span> (var i<span class="pl-k">=</span><span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">5</span>; i<span class="pl-k">++</span>) {    
  puts i                                  console.log(i);           
<span class="pl-k">end</span>                                     }                             


<span class="pl-c"># prints 6x, 0,1,2,3,4,5                </span>
<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">0</span>...<span class="pl-c1">5</span>                          <span class="pl-k">for</span> (var i<span class="pl-k">=</span><span class="pl-c1">0</span>; i <span class="pl-k">&lt;=</span> <span class="pl-c1">5</span>; i<span class="pl-k">++</span>) {
  puts i                                  console.log(i)       
<span class="pl-k">end</span>                                     }                          </pre></div>

<p><br></p>

<h4>
<a id="iterating-over-arrays-and-objects" class="anchor" href="#iterating-over-arrays-and-objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Iterating over arrays and objects</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># Iterate over arrays</span>
basket <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>lemon<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>pear<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span>]     var basket <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>lemon<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>pear<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span>];

<span class="pl-k">for</span> fruit inArr basket                  <span class="pl-k">for</span> (var i1<span class="pl-k">=</span><span class="pl-c1">0</span>, len1<span class="pl-k">=</span>basket.length; i1 <span class="pl-k">&lt;</span> len1; i1<span class="pl-k">++</span>) { var fruit <span class="pl-k">=</span> basket[i1];    
  puts fruit                              console.log(fruit);                                                            
<span class="pl-k">end</span>                                     }                                                                                


<span class="pl-k">for</span> key <span class="pl-k">in</span> obj                          <span class="pl-k">for</span> (var key <span class="pl-k">in</span> obj) {
   alert(key)                             alert(key);
<span class="pl-k">end</span>                                     }


<span class="pl-k">for</span> key,val <span class="pl-k">in</span> obj                      <span class="pl-k">for</span> (var key <span class="pl-k">in</span> obj) { var val <span class="pl-k">=</span> obj[key];
  puts <span class="pl-s"><span class="pl-pds">'</span>My key is: #{key}<span class="pl-pds">'</span></span>                console.log(<span class="pl-s"><span class="pl-pds">'</span>My key is: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> key);
  puts <span class="pl-s"><span class="pl-pds">'</span>My value is: #{val}<span class="pl-pds">'</span></span>              console.log(<span class="pl-s"><span class="pl-pds">'</span>My value is: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> val);
<span class="pl-k">end</span>                                     }</pre></div>

<p><br></p>

<h4>
<a id="convenience-method-aliases-for-puts--printf" class="anchor" href="#convenience-method-aliases-for-puts--printf" aria-hidden="true"><span class="octicon octicon-link"></span></a>Convenience method aliases for puts &amp; printf</h4>

<p><em>Status:</em> <strong>Working</strong><br>
<code>puts</code> and <code>printf</code> are aliases to <code>console.log</code> and <code>process.stdout.write</code>. <code>printf</code> is only available with node enviroments. These are the only methods that have optional parens at this time. If parens are omitted a closing paren will be appended to the end of the line. Parenless multi lines are not possible.</p>

<div class="highlight highlight-source-ruby"><pre>puts <span class="pl-s"><span class="pl-pds">"</span>Hello there<span class="pl-pds">"</span></span>                      console.log(<span class="pl-s"><span class="pl-pds">"</span>Hello there<span class="pl-pds">"</span></span>);
puts(<span class="pl-s"><span class="pl-pds">"</span>Hai!<span class="pl-pds">"</span></span>)                            console.log(<span class="pl-s"><span class="pl-pds">"</span>Hai<span class="pl-pds">"</span></span>)
printf <span class="pl-s"><span class="pl-pds">"</span>Hola<span class="pl-pds">"</span></span>                           process.stdout.write(<span class="pl-s"><span class="pl-pds">"</span>Hola<span class="pl-pds">"</span></span>)
printf(<span class="pl-s"><span class="pl-pds">"</span>Hola<span class="pl-pds">"</span></span>)                          process.stdout.write(<span class="pl-s"><span class="pl-pds">"</span>Hola<span class="pl-pds">"</span></span>)</pre></div>

<p><br></p>

<h4>
<a id="variables--automatic-semi-colon-insertion" class="anchor" href="#variables--automatic-semi-colon-insertion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variables &amp; automatic semi-colon insertion</h4>

<p><em>Status</em>: <strong>Partially implemented, known bug</strong></p>

<p>Variables are automatically declared. Using the var keyword is optional and allowed.<br>
Constants are pre-processed at compile time. This allows some memory savings in certain cases where itcan be utilized.
Semi-colons are automatically inserted as needed (currently not implemented).</p>

<p><em>Note currently RedScript does not take function scope into account. Any
variables that are declared inside of a function multiple times can
lead to unintended global leaks. To disable auto declaration pass <code>no--declare</code>. Another workaround is
to manually declare variables with the var keyword.</em></p>

<div class="highlight highlight-source-ruby"><pre>foo <span class="pl-k">=</span> <span class="pl-c1">12</span>                 var foo <span class="pl-k">=</span> <span class="pl-c1">12</span>;
foo <span class="pl-k">=</span> <span class="pl-c1">20</span>                 foo <span class="pl-k">=</span> <span class="pl-c1">20</span>;

<span class="pl-c"># Constants are preprocessed</span>
<span class="pl-c1">AMOUNT</span> <span class="pl-k">=</span> <span class="pl-c1">233</span>            
puts <span class="pl-c1">AMOUNT</span>             console.log(<span class="pl-c1">233</span>)

<span class="pl-c"># !! Lexical scoping bug in current version !!</span>
func foo                var foo <span class="pl-k">=</span> function() {
  baz <span class="pl-k">=</span> <span class="pl-c1">20</span>                var baz <span class="pl-k">=</span> <span class="pl-c1">20</span>;       
<span class="pl-k">end</span>                     };                    

func bar                var bar <span class="pl-k">=</span> function() {
  baz <span class="pl-k">=</span> <span class="pl-c1">30</span>                baz <span class="pl-k">=</span> <span class="pl-c1">30</span>;       
<span class="pl-k">end</span>                     };                     </pre></div>

<p><br></p>

<h4>
<a id="optional-parenthesis" class="anchor" href="#optional-parenthesis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional Parenthesis</h4>

<p><em>Status:</em> <strong>Implemented with RedScript constructs only</strong></p>

<p>Currently I cannot implement this until I can create a proper lexer. Pull requests welcome ;-) For the time being you have to include parens. A temporary kludgey alias for <code>end)</code> is <code>end-</code>. This is slightly easier to look at for the short run, but expect this to be dropped in the future.</p>

<div class="highlight highlight-source-ruby"><pre>alert <span class="pl-s"><span class="pl-pds">'</span>Hello World!<span class="pl-pds">'</span></span>

getUser <span class="pl-s"><span class="pl-pds">'</span>/users/1<span class="pl-pds">'</span></span>, <span class="pl-k">do</span>
  alert user
<span class="pl-k">end</span>

<span class="pl-c"># Currently you still have to use parens for anything that's not a RedScript construct.</span>
getUser( <span class="pl-s"><span class="pl-pds">'</span>/users/1<span class="pl-pds">'</span></span>, <span class="pl-k">do</span>
  alert(user)
<span class="pl-k">end</span>)

<span class="pl-c"># A kludgey alias for `end)` is `end-`</span>
getUser( <span class="pl-s"><span class="pl-pds">'</span>/users/1<span class="pl-pds">'</span></span>, <span class="pl-k">do</span>
  alert(user)
<span class="pl-k">end</span><span class="pl-k">-</span></pre></div>

<p><br></p>

<h4>
<a id="ruby-flavored-functions" class="anchor" href="#ruby-flavored-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ruby flavored functions</h4>

<p><code>Func [name]</code> declares the function as an expression and sets <code>[name]</code> to a variable. Parens are optional if no arguments are being passed. If arguments are passed braces must be used. Anonymous functions are declared as <code>func</code>, parens are also optional. This type of anonymous function should only be used when using <code>do |x|</code> would be awkward, such as in an <a href="https://github.com/caolan/async">async</a>'s array of parallel functions.</p>

<p><em>Status:</em> <strong>Working</strong></p>

<div class="highlight highlight-source-ruby"><pre>func say(msg)                            var say <span class="pl-k">=</span> function(msg) {
  puts <span class="pl-s"><span class="pl-pds">"</span>Message: <span class="pl-pse">#{</span><span class="pl-s1">msg</span><span class="pl-pse"><span class="pl-s1">}</span></span><span class="pl-pds">"</span></span>                   console.log(<span class="pl-s"><span class="pl-pds">"</span>Message: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> msg);
<span class="pl-k">end</span>                                      };

<span class="pl-c"># Optional function parens</span>
func sayHello
  puts <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>
<span class="pl-k">end</span>

<span class="pl-c"># anonymous function</span>
func                                    function() {
  <span class="pl-c"># do stuff                              // do stuff</span>
<span class="pl-k">end</span>                                     }

func(a,b)                               function(a,b) {
  <span class="pl-c"># do stuff                              // do stuff</span>
<span class="pl-k">end</span>                                     }</pre></div>

<p><br></p>

<h4>
<a id="ifelseelse-if" class="anchor" href="#ifelseelse-if" aria-hidden="true"><span class="octicon octicon-link"></span></a>If/else/else if</h4>

<p><em>Status:</em> <strong>Partially implemented</strong></p>

<p>If statements currently are multi-line. If you would like to use a one liner, you can still use vanilla js <code>if (err) throw err;</code>.</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">if</span> foo <span class="pl-k">==</span> <span class="pl-c1">10</span>                            <span class="pl-k">if</span> (foo <span class="pl-k">===</span> <span class="pl-c1">10</span>) {
  bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>)                         bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>);
<span class="pl-id">else if</span> foo <span class="pl-k">==</span> <span class="pl-c1">20</span>                       } <span class="pl-id">else if</span> (foo <span class="pl-k">===</span> <span class="pl-c1">20</span>) {
  bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>)                         bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>);
<span class="pl-k">else</span>                                    } <span class="pl-k">else</span> {
  bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>)                         bar(<span class="pl-s"><span class="pl-pds">"</span>do stuff<span class="pl-pds">"</span></span>);
<span class="pl-k">end</span>                                     }

<span class="pl-k">throw</span> err <span class="pl-k">if</span> err                        <span class="pl-k">if</span> (err) { <span class="pl-k">throw</span> err; }</pre></div>

<p><br></p>

<h4>
<a id="methods--object-literal" class="anchor" href="#methods--object-literal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods &amp; Object Literal</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Methods are declared using the def keyword and parens are optional <em>if</em> arguments are not used.<br>
Attaching a method to an object's prototype be defined using <code>def objName &gt;&gt; mthdName</code>.</p>

<div class="highlight highlight-source-ruby"><pre>object auto                                   var auto <span class="pl-k">=</span> {
  <span class="pl-c1">wheels:</span> <span class="pl-c1">4</span>,                                    <span class="pl-c1">wheels:</span> <span class="pl-c1">4</span>,
  <span class="pl-c1">engine:</span> <span class="pl-c1">true</span>,                                 <span class="pl-c1">engine:</span> <span class="pl-c1">true</span>,

  <span class="pl-k">def</span> <span class="pl-en">honk</span>                                      <span class="pl-smi">honk</span>: function() {
    puts <span class="pl-s"><span class="pl-pds">"</span>hoooonk<span class="pl-pds">"</span></span>                                console.log(<span class="pl-s"><span class="pl-pds">"</span>hooooonk<span class="pl-pds">"</span></span>);
  <span class="pl-k">end</span>,                                          },

  <span class="pl-k">def</span> <span class="pl-en">sayHi</span>(<span class="pl-smi">msg</span>)                                <span class="pl-c1">sayHi:</span> function(msg) {
    puts msg                                      console.log(msg);
  <span class="pl-k">end</span>                                           }
<span class="pl-k">end</span>                                           }

<span class="pl-c"># Define outside of object literal</span>
<span class="pl-k">def</span> <span class="pl-en">auto.add</span>(<span class="pl-smi">x</span>, <span class="pl-smi">y</span>)                            auto.add <span class="pl-k">=</span> function(x,y) {
  <span class="pl-k">return</span> x <span class="pl-k">+</span> <span class="pl-smi">@wheels</span>                            <span class="pl-k">return</span> x <span class="pl-k">+</span> this.wheels;
<span class="pl-k">end</span>                                           };

<span class="pl-c"># Define method attached to prototype</span>
<span class="pl-k">def</span> <span class="pl-en">Car</span> <span class="pl-k">&gt;&gt;</span> sub(x,<span class="pl-smi">y</span>)                          <span class="pl-c1">Car</span>.prototype.sub <span class="pl-k">=</span> function(x, <span class="pl-smi">y</span>) {
  <span class="pl-k">return</span> x <span class="pl-k">-</span> y                                  <span class="pl-k">return</span> x <span class="pl-k">-</span> y;
<span class="pl-k">end</span>                                           };</pre></div>

<p><br></p>

<h4>
<a id="block-like-syntax-for-anonymous-functions" class="anchor" href="#block-like-syntax-for-anonymous-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Block-like Syntax for Anonymous Functions</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Block like syntax is a shorter way to write an anonymous function. The preceding comma is optional. However, including it may be easier to understand if it's included. Once we have optional parens working this will look <em>much</em> nicer! </p>

<div class="highlight highlight-source-ruby"><pre>
app.get(<span class="pl-s"><span class="pl-pds">'</span>/users/:user<span class="pl-pds">'</span></span>, <span class="pl-k">do </span>|<span class="pl-smi">req</span>|        app.get(<span class="pl-s"><span class="pl-pds">'</span>/users/:user<span class="pl-pds">'</span></span>, function(req) {
  puts req.params.name                    console.log(req.params.name);
<span class="pl-k">end</span>)                                    });

<span class="pl-c"># no params</span>
<span class="pl-smi">$myBtn</span>.click( <span class="pl-k">do                        </span><span class="pl-smi">$myBtn</span>.click( function() {
  alert(<span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>)                             alert(<span class="pl-s"><span class="pl-pds">"</span>hi<span class="pl-pds">"</span></span>);
<span class="pl-k">end</span>)                                    });</pre></div>

<p><br></p>

<h4>
<a id="commonjs-modules" class="anchor" href="#commonjs-modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>CommonJS Modules</h4>

<p><em>Status:</em> <strong>Partially Implemented</strong>  </p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># Require a module as set variable as that name</span>
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>express<span class="pl-pds">'</span></span>                                          var express <span class="pl-k">=</span> <span class="pl-k">require</span>(<span class="pl-s"><span class="pl-pds">'</span>express<span class="pl-pds">'</span></span>);

<span class="pl-c"># Require a directory as a different name</span>
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>./lib/widget<span class="pl-pds">'</span></span> as <span class="pl-c1">Widget</span>                           var <span class="pl-c1">Widget</span> <span class="pl-k">=</span> <span class="pl-k">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./lib/widget<span class="pl-pds">'</span></span>);

<span class="pl-c"># Require a property of a module</span>
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>events<span class="pl-pds">'</span></span>.<span class="pl-c1">EventEmitter</span> as <span class="pl-c1">EM</span>                        var <span class="pl-c1">EM</span> <span class="pl-k">=</span> <span class="pl-k">require</span>(<span class="pl-s"><span class="pl-pds">'</span>events<span class="pl-pds">'</span></span>).<span class="pl-c1">EventEmitter</span>;

<span class="pl-c"># Require file foo and set it's variable to foo</span>
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>../lib/Router<span class="pl-pds">'</span></span>                                    var <span class="pl-c1">Router</span> <span class="pl-k">=</span> <span class="pl-k">require</span>(<span class="pl-s"><span class="pl-pds">'</span>../lib/Router<span class="pl-pds">'</span></span>); 

<span class="pl-c"># export methods</span>
export <span class="pl-k">def</span> <span class="pl-en">getName</span>                                         <span class="pl-smi">exports</span>.getName <span class="pl-k">=</span> function() {
  <span class="pl-k">return</span> user.name                                           <span class="pl-k">return</span> user.name;
<span class="pl-k">end</span>                                                        };

<span class="pl-c"># export properties</span>
export age                                                 exports.age <span class="pl-k">=</span> <span class="pl-c1">22</span>;</pre></div>

<div class="highlight highlight-source-ruby"><pre>
func name                                                var name <span class="pl-k">=</span> function() {
  <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>John<span class="pl-pds">"</span></span>                                            <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>John<span class="pl-pds">"</span></span>;
<span class="pl-k">end</span>                                                      }

age <span class="pl-k">=</span> <span class="pl-c1">92</span>                                                 var age <span class="pl-k">=</span> <span class="pl-c1">92</span>;

export                                                    <span class="pl-k">module</span>.exports <span class="pl-k">=</span> {
  getName as name                                           <span class="pl-c1">getName:</span> name,
  age                                                       <span class="pl-c1">age:</span> age
<span class="pl-k">end</span>                                                       }</pre></div>

<p><br></p>

<h4>
<a id="requirejs-module-sugar" class="anchor" href="#requirejs-module-sugar" aria-hidden="true"><span class="octicon octicon-link"></span></a>RequireJS Module Sugar</h4>

<p><em>Status:</em> <strong>Not Implemented</strong>  </p>

<p>Using <code>define module</code> wraps the current file in a new anonymous RequireJS module. Exports can either be exported in a export object literal or by using <code>export foo</code> to export the foo variable only. Any dependencies can be declared by using <code>require 'foo' as foo</code> which assigns <code>'foo'</code>'s returned value to a variable called <code>foo</code>.</p>

<div class="highlight highlight-source-ruby"><pre>define <span class="pl-k">module</span>                                                  define(function() {

func foo(x)                                                      var foo <span class="pl-k">=</span> function(x) {
  puts x                                                           console.log(x);
<span class="pl-k">end</span>                                                              }

export foo                                                       <span class="pl-k">return</span> foo; });</pre></div>

<div class="highlight highlight-source-ruby"><pre>
define <span class="pl-k">module</span>                                                   define([ <span class="pl-s"><span class="pl-pds">'</span>jquery<span class="pl-pds">'</span></span>,
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>jquery<span class="pl-pds">'</span></span> as $                                                    <span class="pl-s"><span class="pl-pds">'</span>./views/widget<span class="pl-pds">'</span></span>],
<span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>./views/widget<span class="pl-pds">'</span></span> as <span class="pl-c1">Widget</span>                                function(<span class="pl-smi">$,</span> <span class="pl-c1">Widget</span>) {        

options <span class="pl-k">=</span> {                                                        var options <span class="pl-k">=</span> {
  <span class="pl-c1">moonRoof:</span> <span class="pl-c1">true</span>,                                                    <span class="pl-c1">moonRoof:</span> <span class="pl-c1">true</span>,   
  <span class="pl-c1">seats:</span> <span class="pl-c1">5</span>                                                           <span class="pl-c1">seats:</span> <span class="pl-c1">5</span>      
}                                                                  }          

getCost <span class="pl-k">=</span> <span class="pl-c1">16899</span>                                                    var getCost <span class="pl-k">=</span> <span class="pl-c1">16899</span>;
wheels <span class="pl-k">=</span> <span class="pl-c1">4</span>                                                         var wheels <span class="pl-k">=</span> <span class="pl-c1">4</span>;

<span class="pl-c"># export literal compiles to an object that gets returned</span>
export                                                              <span class="pl-k">return</span> {   
  getCost                                                               getCost : getCost,
  hasMoonRoof from options.moonRoof                                     hasMoonRoof : options.moonRoof,   
  getWheels from wheels                                                 getWheels : wheels     
<span class="pl-k">end</span>                                                                 }           
                                                                }); </pre></div>

<p><br></p>

<h4>
<a id="ruby--coffee-style-case-switch-statement" class="anchor" href="#ruby--coffee-style-case-switch-statement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ruby / Coffee style case switch statement</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Switch statements still need <code>break</code> inserted to prevent falling through. The exception is one liners, then it's appened to the line.</p>

<div class="highlight highlight-source-ruby"><pre>switch fruit                                             switch (fruit) {
<span class="pl-k">when</span> <span class="pl-s"><span class="pl-pds">"</span>apple<span class="pl-pds">"</span></span>                                               <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>apple<span class="pl-pds">"</span></span>:
  puts <span class="pl-s"><span class="pl-pds">"</span>it's an appppple<span class="pl-pds">"</span></span>                                    console.log(<span class="pl-s"><span class="pl-pds">"</span>it's an appppple<span class="pl-pds">"</span></span>);
  <span class="pl-k">break</span>                                                      <span class="pl-k">break</span>;
<span class="pl-k">when</span> <span class="pl-s"><span class="pl-pds">"</span>bannana<span class="pl-pds">"</span></span> <span class="pl-k">then</span> puts(<span class="pl-s"><span class="pl-pds">"</span>bannana<span class="pl-pds">"</span></span>)                        <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>bannana<span class="pl-pds">"</span></span>: console.log(<span class="pl-s"><span class="pl-pds">"</span>bannana<span class="pl-pds">"</span></span>); <span class="pl-k">break</span>;
<span class="pl-k">when</span> <span class="pl-s"><span class="pl-pds">"</span>orange<span class="pl-pds">"</span></span>                                              <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>orange<span class="pl-pds">"</span></span>:
  puts <span class="pl-s"><span class="pl-pds">"</span>it's an orange<span class="pl-pds">"</span></span>                                      console.log(<span class="pl-s"><span class="pl-pds">"</span>it's an orange<span class="pl-pds">"</span></span>);
  <span class="pl-k">break</span>                                                      <span class="pl-k">break</span>;
default                                                    <span class="pl-c1">default:</span>
  puts <span class="pl-s"><span class="pl-pds">"</span>uh oh, bummer<span class="pl-pds">"</span></span>                                       console.log(<span class="pl-s"><span class="pl-pds">"</span>uh oh, bummer<span class="pl-pds">"</span></span>);
<span class="pl-k">end</span>                                                      }</pre></div>

<p><br></p>

<h4>
<a id="private-blocks" class="anchor" href="#private-blocks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Private Blocks</h4>

<p><em>Status:</em> <strong>Working</strong></p>

<p>Private blocks keep variables scoped inside the block using function scope. There is a slight performance hit due to the IIFE. Again, due to the lack of proper lexing/parsing I can't yet use an <code>end</code> block. A workaround is <code>endPriv</code>, this calls the IIFE. Also due to the variable declaration bug mention above, variables like the example below will currently need var manually inserted to keep <code>foo</code> from leaking out and changing global <code>foo</code> to <code>10</code>. The beginning of the IIFE is nerfed with a semi-colon to prevent any potential errors (especially with the current state of RedScript not having automatic semi-colon insertion). </p>

<div class="highlight highlight-source-ruby"><pre>foo <span class="pl-k">=</span> <span class="pl-c1">200</span>                                                 var foo <span class="pl-k">=</span> <span class="pl-c1">200</span>; 

<span class="pl-k">private</span>                                                  (function(){
  var foo <span class="pl-k">=</span> <span class="pl-c1">10</span>                                              var foo <span class="pl-k">=</span> <span class="pl-c1">10</span>;
endPriv                                                   })();

alert(foo) <span class="pl-c">#alerts 200                                    alert(foo);</span></pre></div>

<p><br></p>

<h4>
<a id="classical-inheritance" class="anchor" href="#classical-inheritance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Classical Inheritance</h4>

<p><em>Status</em>: <strong>Working</strong></p>

<p>RedScript classes are currently using John Resig's simple inheritance. In the future a solution closer to coffeescript would be ideal, allowing one to inherit from any constructor and still have the correct syntax. The current implementation will not inherit unless the base class is created with RedScript. However, backbone and ember both use the <code>.extend</code> method which is convenient since using<br>
<code>class Foo &lt; Backbone.Model.extend(</code> will call their own extend implementation. Backbone does not have a <code>this._super</code> method so if you want to call super you would need to use a backbone plugin for that. Ember uses the same <code>this._super</code> syntax as RedScript so calling super will call Ember's implementation.</p>

<p>If you're only using their inheritance implementation you can disable the insertion of RedScript's inheritance by passing the <code>--no-class-insertion</code> flag.</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">Animal</span>                                          var <span class="pl-c1">Animal</span> <span class="pl-k">=</span> <span class="pl-c1">Class</span>.<span class="pl-k">extend</span>({           
  <span class="pl-k">def</span> <span class="pl-en">init</span>(<span class="pl-smi">name</span>)                                        <span class="pl-c1">init:</span> function(name) {              
    <span class="pl-smi">@name</span> <span class="pl-k">=</span> name                                          this.name <span class="pl-k">=</span> name;                 
  <span class="pl-k">end</span>,                                                  },                                  

  <span class="pl-k">def</span> <span class="pl-en">sayHi</span>                                             <span class="pl-smi">sayHi</span>: function() {                 
    puts <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>                                          console.log(<span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>);             
  <span class="pl-k">end</span>                                                   }                                   
<span class="pl-k">end</span>)                                                   });                                   

<span class="pl-k">class</span> <span class="pl-en">Duck<span class="pl-e"> &lt; Animal</span></span>                                   var <span class="pl-c1">Duck</span> <span class="pl-k">=</span> <span class="pl-c1">Animal</span>.<span class="pl-k">extend</span>({            
  <span class="pl-k">def</span> <span class="pl-en">init</span>                                              <span class="pl-smi">init</span>: function(name) {  
    <span class="pl-k">super</span> name                                            this._super(name);                    
    alert(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pse">#{</span><span class="pl-s1"><span class="pl-smi">@name</span></span><span class="pl-pse"><span class="pl-s1">}</span></span> is alive!<span class="pl-pds">"</span></span>)                           alert(this.name <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> is alive!<span class="pl-pds">"</span></span>)   
  <span class="pl-k">end</span>,                                                  },                                  

  <span class="pl-k">def</span> <span class="pl-en">sayHi</span>                                             <span class="pl-smi">sayHi</span>: function() {                 
    <span class="pl-k">super</span>                                                 this._super();                    
    puts <span class="pl-s"><span class="pl-pds">"</span>Quack<span class="pl-pds">"</span></span>                                          console.log(<span class="pl-s"><span class="pl-pds">"</span>Quack<span class="pl-pds">"</span></span>);             
  <span class="pl-k">end</span>                                                   }                                   
<span class="pl-k">end</span>)                                                   });                                   

duck <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Duck</span>(<span class="pl-s"><span class="pl-pds">'</span>Darick<span class="pl-pds">'</span></span>)                             var duck <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Duck</span>(<span class="pl-s"><span class="pl-pds">'</span>Darick<span class="pl-pds">'</span></span>);
duck.sayHi()                                          duck.sayHi();</pre></div>

<p><br></p>

<h4>
<a id="prototypal-inheritance" class="anchor" href="#prototypal-inheritance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prototypal Inheritance</h4>

<p><em>Status</em>: <strong>Partially Implemented</strong></p>

<p>This is an experiment to try and bring out JavaScripts true prototypal nature. The goal is to be able to <em>easily</em> inherit without using constructors or faux classes. Vanilla JS makes it very verbose to inherit from another object, unlike <a href="http://en.wikipedia.org/wiki/Self_programming_language#Inheritance.2FDelegation">Self</a>, JavaScript's inheritance inspiration. One of the drawbacks to property delegation is keeping state in an object. Using <code>object myDuck clones duck</code> will copy all of the properties from duck into myDuck, ensuring it won't grab it's parents property by accident. Currently <code>clones</code> is not implemeneted yet.</p>

<div class="highlight highlight-source-ruby"><pre>object animal
  <span class="pl-c1">name:</span> null,

  <span class="pl-k">def</span> <span class="pl-en">sayHi</span>
    puts <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

object duck
  parent<span class="pl-k">*</span>: animal,
  <span class="pl-c1">name:</span> null,

  <span class="pl-k">def</span> <span class="pl-en">sayHi</span>
    puts <span class="pl-s"><span class="pl-pds">"</span>Quack<span class="pl-pds">"</span></span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

<span class="pl-c"># this duck's attr's are cloned instead of deligated</span>
<span class="pl-c"># with `parent*`, usefull for statefull objects</span>
<span class="pl-c">#</span>
object myDuck clones duck
  <span class="pl-c1">name:</span> <span class="pl-s"><span class="pl-pds">'</span>Darick<span class="pl-pds">'</span></span>
<span class="pl-k">end</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AdamBrodzinski/RedScript">RedScript</a> is maintained by <a href="https://github.com/AdamBrodzinski">AdamBrodzinski</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38075559-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
